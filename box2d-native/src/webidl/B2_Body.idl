[NoDelete]
interface B2_Body {
    // Body definition and creation
    static void defaultBodyDef([Ref] b2BodyDef result);
    static unsigned long long createBody(unsigned long long worldId, [Const] b2BodyDef def);
    static void destroyBody(unsigned long long bodyId);
    static boolean isValid(unsigned long long bodyId);

    // Body type
    static b2BodyType getType(unsigned long long bodyId);
    static void setType(unsigned long long bodyId, b2BodyType type);

    // Position and rotation
    [Value] static b2Vec2 getPosition(unsigned long long bodyId);
    [Value] static b2Rot getRotation(unsigned long long bodyId);
    [Value] static b2Transform getTransform(unsigned long long bodyId);
    static void setTransform(unsigned long long bodyId, [Value] b2Vec2 position, [Value] b2Rot rotation);
    [Value] static b2AABB computeAABB(unsigned long long bodyId);

    // Coordinate transformations
    [Value] static b2Vec2 getLocalPoint(unsigned long long bodyId, [Value] b2Vec2 worldPoint);
    [Value] static b2Vec2 getWorldPoint(unsigned long long bodyId, [Value] b2Vec2 localPoint);
    [Value] static b2Vec2 getLocalVector(unsigned long long bodyId, [Value] b2Vec2 worldVector);
    [Value] static b2Vec2 getWorldVector(unsigned long long bodyId, [Value] b2Vec2 localVector);

    // Velocity
    [Value] static b2Vec2 getLinearVelocity(unsigned long long bodyId);
    static float getAngularVelocity(unsigned long long bodyId);
    static void setLinearVelocity(unsigned long long bodyId, [Value] b2Vec2 linearVelocity);
    static void setAngularVelocity(unsigned long long bodyId, float angularVelocity);
    static void setTargetTransform(unsigned long long bodyId, [Value] b2Transform target, float timeStep);
    [Value] static b2Vec2 getLocalPointVelocity(unsigned long long bodyId, [Value] b2Vec2 localPoint);
    [Value] static b2Vec2 getWorldPointVelocity(unsigned long long bodyId, [Value] b2Vec2 worldPoint);

    // Forces and impulses
    static void applyForce(unsigned long long bodyId, [Value] b2Vec2 force, [Value] b2Vec2 point, boolean wake);
    static void applyForceToCenter(unsigned long long bodyId, [Value] b2Vec2 force, boolean wake);
    static void applyTorque(unsigned long long bodyId, float torque, boolean wake);
    static void applyLinearImpulse(unsigned long long bodyId, [Value] b2Vec2 impulse, [Value] b2Vec2 point, boolean wake);
    static void applyLinearImpulseToCenter(unsigned long long bodyId, [Value] b2Vec2 impulse, boolean wake);
    static void applyAngularImpulse(unsigned long long bodyId, float impulse, boolean wake);

    // Mass properties
    static float getMass(unsigned long long bodyId);
    static float getRotationalInertia(unsigned long long bodyId);
    [Value] static b2Vec2 getLocalCenterOfMass(unsigned long long bodyId);
    [Value] static b2Vec2 getWorldCenterOfMass(unsigned long long bodyId);
    static void setMassData(unsigned long long bodyId, [Value] b2MassData massData);
    [Value] static b2MassData getMassData(unsigned long long bodyId);
    static void applyMassFromShapes(unsigned long long bodyId);

    // Damping
    static void setLinearDamping(unsigned long long bodyId, float linearDamping);
    static float getLinearDamping(unsigned long long bodyId);
    static void setAngularDamping(unsigned long long bodyId, float angularDamping);
    static float getAngularDamping(unsigned long long bodyId);

    // Gravity scale
    static void setGravityScale(unsigned long long bodyId, float gravityScale);
    static float getGravityScale(unsigned long long bodyId);

    // Sleep state
    static boolean isAwake(unsigned long long bodyId);
    static void setAwake(unsigned long long bodyId, boolean awake);
    static void enableSleep(unsigned long long bodyId, boolean enableSleep);
    static boolean isSleepEnabled(unsigned long long bodyId);
    static void setSleepThreshold(unsigned long long bodyId, float sleepThreshold);
    static float getSleepThreshold(unsigned long long bodyId);

    // Enable/disable state
    static boolean isEnabled(unsigned long long bodyId);
    static void disable(unsigned long long bodyId);
    static void enable(unsigned long long bodyId);

    // Fixed rotation
    static void setFixedRotation(unsigned long long bodyId, boolean flag);
    static boolean isFixedRotation(unsigned long long bodyId);

    // Bullet
    static void setBullet(unsigned long long bodyId, boolean flag);
    static boolean isBullet(unsigned long long bodyId);

    // World and relationships
    [Value] static b2WorldId getWorld(unsigned long long bodyId);
    static long getShapeCount(unsigned long long bodyId);
    static long getShapes(unsigned long long bodyId, b2ShapeIdArray shapeArray);
    static long getJointCount(unsigned long long bodyId);
    static long getJoints(unsigned long long bodyId, b2JointIdArray jointArray);

    // Events
    static void enableContactEvents(unsigned long long bodyId, boolean flag);
    static void enableHitEvents(unsigned long long bodyId, boolean flag);

    // Contacts
    static long getContactCapacity(unsigned long long bodyId);
    static long getContactData(unsigned long long bodyId, b2ContactDataArray contactData);

    // Body name and user data
    static void setName(unsigned long long bodyId, DOMString name);
    static DOMString getName(unsigned long long bodyId);
    static void setUserData(unsigned long long bodyId, VoidPtr userData);
    static VoidPtr getUserData(unsigned long long bodyId);
};

[StackAllocatable]
interface b2BodyDef {
    void b2BodyDef();
    attribute b2BodyType type;
    [Value] attribute b2Vec2 position;
    [Value] attribute b2Rot rotation;
    [Value] attribute b2Vec2 linearVelocity;
    attribute float angularVelocity;
    attribute float linearDamping;
    attribute float angularDamping;
    attribute float gravityScale;
    attribute float sleepThreshold;
    attribute DOMString name;
    attribute VoidPtr userData;
    attribute boolean enableSleep;
    attribute boolean isAwake;
    attribute boolean fixedRotation;
    attribute boolean isBullet;
    attribute boolean isEnabled;
    attribute boolean allowFastRotation;
};

enum b2BodyType {
    "b2_staticBody",
    "b2_kinematicBody",
    "b2_dynamicBody"
};